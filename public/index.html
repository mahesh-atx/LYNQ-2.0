<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, viewport-fit=cover, interactive-widget=resizes-content" />
  <title>Home — LYNQ AI</title>

  <script src="https://kit.fontawesome.com/ae8ff12b97.js" crossorigin="anonymous"></script>
  <link rel="apple-touch-icon" sizes="180x180" href="./favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./favicons/favicon-16x16.png">
  <link rel="manifest" href="./favicons/site.webmanifest">

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@200;300;400;500;600;700&display=swap"
    rel="stylesheet" />

  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css" />

  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
  <script>
    // Required by PDF.js
    pdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js`;
  </script>

  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/home.css" />

  <style>
    .confirm-modal-overlay {
      position: fixed;
      inset: 0;
      background-color: rgba(0, 0, 0, 0.6);
      display: none;
      /* Hidden by default */
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .confirm-modal-overlay.active {
      display: flex;
    }

    .confirm-modal {
      background-color: var(--bg-secondary);
      border-radius: 12px;
      padding: 24px;
      width: 90%;
      max-width: 400px;
      border: 1px solid var(--border-primary);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      animation: modalFadeIn 0.2s ease-out;
    }

    .confirm-modal h3 {
      margin-top: 0;
      margin-bottom: 10px;
      color: var(--text-primary);
    }

    .confirm-modal p {
      margin-bottom: 20px;
      color: var(--text-secondary);
      font-size: 0.9rem;
      line-height: 1.5;
      word-break: break-word;
    }

    .confirm-modal-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }

    .confirm-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .confirm-btn-cancel {
      background-color: var(--bg-tertiary);
      color: var(--text-secondary);
    }

    .confirm-btn-cancel:hover {
      background-color: var(--border-primary);
    }

    .confirm-btn-delete {
      background-color: #d9534f;
      color: white;
    }

    .confirm-btn-delete:hover {
      background-color: #c9302c;
    }

    @keyframes modalFadeIn {
      from {
        opacity: 0;
        transform: scale(0.95);
      }

      to {
        opacity: 1;
        transform: scale(1);
      }
    }
  </style>
</head>

<body class="dark-mode">
  <div id="global-loader" style="
        position: fixed;
        top: 0; left: 0; right: 0; bottom: 0;
        background-color: var(--bg-primary);
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: opacity 0.5s ease;
    ">
    <div class="loader-content">
      <div class="loader-logo">
        <i class="fa-solid fa-bolt"></i> LYNQ
      </div>
      <div class="seek-bar-wrapper">
        <div class="seek-bar-fill"></div>
      </div>
    </div>
  </div>

  <div id="app-container">
    <script>
      (function () {
        const savedTheme = localStorage.getItem("lynq-theme");
        // If saved theme is explicitly light, remove the class immediately
        if (savedTheme === "light") {
          document.body.classList.remove("dark-mode");
        }
        // If it's dark (or null/default), the class 'dark-mode' on <body> stays.
      })();
    </script>

    <div id="app-container">
      <aside id="sidebar" class="collapsed">
        <div style="flex-shrink: 0">
          <div class="sidebar-header">
            <span style="display: flex; align-items: center; gap: 10px"><i class="fa-solid fa-bolt"></i> LYNQ AI</span>
            <button class="action-btn mobile-only" onclick="toggleSidebar()">
              <i class="fa-solid fa-xmark"></i>
            </button>
          </div>
        </div>

        <nav class="nav-menu">
          <div class="nav-label">Menu</div>
          <a href="#" class="nav-item" onclick="resetChat();" id="nav-new-chat"><i class="fa-solid fa-plus"></i> New
            Chat</a>
          <a href="index.html" class="nav-item active" id="nav-home"><i class="fa-solid fa-house"></i> Home</a>

          <a href="projects.html" class="nav-item" id="nav-projects"><i class="fa-solid fa-layer-group"></i>
            Projects</a>

          <div class="nav-label" style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              padding-right: 5px;
              position: relative;
            ">
            <span id="recent-chats-label">Recent Chats</span>
            <input type="text" id="chat-search-input" placeholder="Search chats..." style="
                display: none;
                width: 100%;
                background: var(--bg-primary);
                border: 1px solid var(--border-primary);
                border-radius: 6px;
                padding: 4px 8px;
                color: var(--text-primary);
              " onkeyup="filterRecentChats()" onblur="toggleChatSearch(false)" />
            <i class="fa-solid fa-magnifying-glass search-trigger" id="chat-search-trigger"
              onclick="toggleChatSearch(true)"></i>
          </div>
          <div id="recent-chats-container"></div>
        </nav>

        <div class="sidebar-footer">
          <a href="settings.html" class="nav-item" id="nav-settings"><i class="fa-solid fa-gear"></i> Settings</a>
          <a href="login.html" class="nav-item" id="nav-login-link" style="margin-top: 5px; display: none;">
            <i class="fa-solid fa-right-to-bracket"></i> Login / Sign Up
          </a>

          <a href="#" onclick="toggleProfilePopup()" class="nav-item" id="nav-profile-wrapper"
            style="margin-top: 5px; display: none;">
            <div class="avatar user" id="nav-profile-avatar">
              U
            </div>
            <span id="nav-profile-name">User</span>
          </a>
        </div>
      </aside>

      <main id="main-content">
        <div class="top-bar">
          <button class="action-btn" onclick="toggleSidebar()">
            <i class="fa-solid fa-bars"></i>
          </button>
          <div class="top-logo-title">
            <i class="fa-solid fa-bolt"></i> LYNQ AI
          </div>
          <div style="flex: 1"></div>
          <div class="top-actions">
            <button class="upgrade-btn" onclick="togglePricing()">
              <i class="fa-regular fa-gem"></i> <span>Upgrade to Pro</span>
            </button>

            <button class="top-profile-btn mobile-signup-btn" onclick="location.href='login.html?action=signup'"
              style="margin-right: 8px; display: none;">
              <span>Sign Up</span>
            </button>

            <button class="top-profile-btn" onclick="location.href='login.html'" id="login-signup-btn"
              style="margin-right: 8px; display: none;">
              <i class="fa-solid fa-right-to-bracket"></i> <span>Sign Up</span>
            </button>

            <button class="top-profile-btn" onclick="toggleProfilePopup()" id="top-profile-btn-user"
              style="display: none;">
              <div class="avatar user" id="top-profile-avatar">U</div>
              <span id="top-profile-name">User</span>
            </button>
          </div>
        </div>

        <div id="home-view" class="view-section active">

          <div id="chat-wrapper">
            <div id="guest-banner" class="guest-notice-banner" style="display: none;">
              <div class="guest-banner-content">
                <i class="fa-solid fa-circle-info"></i>
                <span>
                  You are using LYNQ as a Guest. Chats are saved locally.
                  <a href="login.html" class="guest-link">Log in</a> to sync.
                </span>
              </div>
              <button class="close-banner-btn" onclick="document.getElementById('guest-banner').style.display='none'">
                <i class="fa-solid fa-xmark"></i>
              </button>
            </div>

            <div id="chat-container">
              <div class="welcome-screen" id="welcome-screen">
                <div class="welcome-text">
                  <h1 id="welcome-name">Hello</h1>
                  <p style="color: var(--text-secondary)">
                    How can I help you create today?
                  </p>
                </div>

                <div class="suggestion-pills-mobile" id="suggestion-pills-mobile">
                  <button class="pill-card"
                    onclick="sendSuggestion('Review my portfolio code for SEO best practices.')">
                    <i class="fa-solid fa-code"></i> Code Review
                  </button>
                  <button class="pill-card"
                    onclick="sendSuggestion('Generate a modern color palette for a SaaS dashboard.')">
                    <i class="fa-solid fa-palette"></i> Color Palette
                  </button>
                  <button class="pill-card"
                    onclick="sendSuggestion('Write a Python script to automate file organization.')">
                    <i class="fa-brands fa-python"></i> Python Script
                  </button>
                  <button class="pill-card"
                    onclick="sendSuggestion('Explain the key differences between SQL and NoSQL.')">
                    <i class="fa-solid fa-database"></i> SQL vs NoSQL
                  </button>
                </div>
              </div>
              <div id="messages-wrapper"></div>
            </div>

            <div class="input-area-wrapper fixed-mobile-input">
              <input type="file" id="file-upload" accept="application/pdf" style="display: none" />
              <div class="input-container">
                <div id="attachment-preview-container"></div>

                <textarea id="chat-input" rows="1" placeholder="Ask LYNQ anything..."></textarea>
                <div class="input-toolbar">
                  <div class="toolbar-left">
                    <button class="tool-btn-round" id="attach-file-btn" title="Attach PDF File">
                      <i class="fa-solid fa-plus"></i>
                    </button>
                    <div class="tool-dropdown-wrapper">
                      <button class="tool-btn-round" id="tools-toggle-btn" title="Toggle Tools">
                        <i class="fa-solid fa-tools"></i> </button>
                      <div class="tool-dropdown-menu" id="tools-dropdown">
                        <button class="tool-dropdown-item" id="canvas-toggle-btn">
                          <i class="fa-solid fa-file-invoice"></i>
                          <div>
                            <span>Canvas</span>
                            <span class="tool-desc">Open the code canvas</span>
                          </div>
                        </button>
                        <button class="tool-dropdown-item" id="web-search-toggle-btn">
                          <i class="fa-solid fa-earth-americas"></i>
                          <div>
                            <span>Web Search</span>
                            <span class="tool-desc">Access real-time data</span>
                          </div>
                        </button>
                      </div>
                    </div>
                    <div class="model-selector-wrapper">
                      <button class="model-btn" onclick="toggleModelDropdown()" id="current-model-btn">
                        <i class="fa-solid fa-bolt" style="color: #ffd700"></i>
                        llama-3.1<i class="fa-solid fa-chevron-down chevron"></i>
                      </button>
                      <div class="model-dropdown" id="model-dropdown">
                        <div class="model-option selected"
                          onclick="selectModel(this, 'llama-3.1-8b-instant', 'fa-bolt', '#FFD700')">
                          <span><i class="fa-solid fa-bolt" style="color: #ffd700; margin-right: 8px"></i>
                            llama-3.1</span>
                          <span class="pro-badge">Pro</span>
                          <i class="fa-solid fa-check check-icon"></i>
                        </div>
                        <div class="model-option"
                          onclick="selectModel(this, 'openai/gpt-oss-20b', 'fa-robot', '#10a37f')">
                          <span><i class="fa-solid fa-robot" style="color: #10a37f; margin-right: 8px"></i>
                            GPT-OSS-20B</span>
                          <span class="pro-badge">Pro</span>
                          <i class="fa-solid fa-check check-icon" style="display: none"></i>
                        </div>
                        <div class="model-option"
                          onclick="selectModel(this, 'openai/gpt-oss-120b', 'fa-bolt-lightning', '#FF4500')">
                          <span><i class="fa-solid fa-bolt-lightning" style="color: #ff4500; margin-right: 8px"></i>
                            gpt-oss-120b</span>
                          <i class="fa-solid fa-check check-icon" style="display: none"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="toolbar-right">
                    <button class="tool-btn-round">
                      <i class="fa-solid fa-microphone-lines"></i>
                    </button>
                    <button class="tool-btn-round send-btn" id="send-btn" onclick="handleSend()">
                      <i class="fa-solid fa-arrow-up"></i>
                    </button>
                    <button class="tool-btn-round stop-btn" id="stop-btn" onclick="stopResponse()"
                      style="display: none">
                      <i class="fa-solid fa-square"></i>
                    </button>
                  </div>
                </div>
              </div>

            </div>
            <div class="footer-text">
              LYNQ AI can make mistakes. Check important info. •
              <a href="https://mahesh-atx.github.io/Portfolio2.0/" target="_blank">Developed by Mahesh Dongare</a>
            </div>
          </div>
          <div id="canvas-pane">
            <div class="canvas-header">
              <div class="canvas-tabs">
                <button class="canvas-tab active" id="canvas-tab-code">
                  <i class="fa-solid fa-code"></i>
                  <span>Code</span>
                </button>
                <button class="canvas-tab" id="canvas-tab-preview">
                  <i class="fa-solid fa-eye"></i>
                  <span>Preview</span>
                </button>
              </div>
              <div class="canvas-actions">
                <button class="tool-btn-round" id="canvas-download-btn" title="Download Code">
                  <i class="fa-solid fa-download"></i>
                </button>
                <button class="tool-btn-round" id="canvas-close-btn" title="Close Canvas">
                  <i class="fa-solid fa-xmark"></i>
                </button>
              </div>
            </div>
            <div id="canvas-content">
              <pre><code id="canvas-code-block" class="language-plaintext"></code></pre>
              <div id="canvas-placeholder">
                <i class="fa-solid fa-code"></i>
                <p>Code from the conversation will appear here when Canvas Mode is active.</p>
              </div>
            </div>

            <div id="canvas-preview-wrapper" style="display: none;">
              <div id="canvas-preview-placeholder">
                <i class="fa-solid fa-eye"></i>
                <p>Click the "Preview" tab to see rendered HTML/CSS.</p>
              </div>
              <iframe id="canvas-preview-iframe" title="Canvas Preview"></iframe>
            </div>
          </div>
        </div>
      </main>
    </div>

    <div id="toast">
      <i class="fa-solid fa-circle-check"></i> Link copied to clipboard!
    </div>

    <div class="modal-overlay" id="pricing-modal">
      <div class="pricing-modal">
        <button class="close-modal" onclick="togglePricing()">&times;</button>
        <div class="pricing-header">
          <h2>Upgrade Your Plan</h2>
          <p style="color: var(--text-secondary)">
            Unlock the full power of AI with Pro features.
          </p>
        </div>
        <div class="pricing-grid">
          <div class="price-card">
            <h3>Starter</h3>
            <div class="price">
              $0<span style="font-size: 1rem; font-weight: 400">/mo</span>
            </div>
            <ul class="features-list">
              <li><i class="fa-solid fa-check"></i> Gemini Flash Model</li>
              <li><i class="fa-solid fa-check"></i> Standard Speed</li>
              <li><i class="fa-solid fa-check"></i> 5 Projects Limit</li>
            </ul>
            <button class="plan-btn free">Current Plan</button>
          </div>
          <div class="price-card pro">
            <div class="popular-tag">MOST POPULAR</div>
            <h3>Pro Member</h3>
            <div class="price">
              $19<span style="font-size: 1rem; font-weight: 400">/mo</span>
            </div>
            <ul class="features-list">
              <li>
                <i class="fa-solid fa-check"></i> <b>Gemini 1.5 Pro & GPT-4o</b>
              </li>
              <li><i class="fa-solid fa-check"></i> Unlimited Fast Projects</li>
              <li><i class="fa-solid fa-check"></i> Priority Support</li>
              <li><i class="fa-solid fa-check"></i> Code Execution</li>
            </ul>
            <button class="plan-btn pro">Upgrade Now</button>
          </div>
          <div class="price-card">
            <h3>Team</h3>
            <div class="price">
              $49<span style="font-size: 1rem; font-weight: 400">/mo</span>
            </div>
            <ul class="features-list">
              <li><i class="fa-solid fa-check"></i> Everything in Pro</li>
              <li><i class="fa-solid fa-check"></i> Admin Dashboard</li>
              <li><i class="fa-solid fa-check"></i> Shared Workspace</li>
              <li><i class="fa-solid fa-check"></i> SSO Integration</li>
            </ul>
            <button class="plan-btn free">Contact Sales</button>
          </div>
        </div>
      </div>
    </div>

    <div class="profile-popup-overlay" id="profile-popup">
      <div class="profile-popup">
        <button class="profile-popup-close" onclick="toggleProfilePopup()">

        </button>

        <div class="profile-popup-avatar" id="popup-avatar">U</div>
        <h2 class="profile-popup-name" id="popup-name">User</h2>
        <p class="profile-popup-email" id="popup-email">user@example.com</p>
        <p class="profile-popup-phone" id="popup-phone">No phone linked</p>

        <div class="profile-popup-badge">
          <i class="fa-solid fa-crown"></i> PRO MEMBER
        </div>

        <button class="profile-popup-logout" onclick="logoutUser()">
          <i class="fa-solid fa-right-from-bracket"></i> Logout
        </button>
      </div>
    </div>

    <div class="confirm-modal-overlay" id="confirm-delete-modal">
      <div class="confirm-modal">
        <h3>Delete Chat</h3>
        <p id="confirm-delete-text">
          Are you sure you want to delete this chat? This action cannot be
          undone.
        </p>
        <div class="confirm-modal-actions">
          <button class="confirm-btn confirm-btn-cancel" id="confirm-delete-cancel">
            Cancel
          </button>
          <button class="confirm-btn confirm-btn-delete" id="confirm-delete-confirm">
            Delete
          </button>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>

    <script src="js/auth.js"></script>
    <script src="js/script.js"></script>
    <script src="js/home.js"></script>
</body>

</html>